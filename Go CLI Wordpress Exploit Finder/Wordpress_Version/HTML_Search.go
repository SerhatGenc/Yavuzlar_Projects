package wordpressversion

import (
	"fmt"
	"io"
	"net/http"
	"os"
	"regexp"
)

func HTML(link string) string {

	resp, err := http.Get(link)

	if err != nil {
		fmt.Println("HTTP response error = ", err)
		os.Exit(1)
	}

	defer resp.Body.Close()

	html, err := io.ReadAll(resp.Body)
	if err != nil {
		fmt.Println("HTTP read error :", err)
		return ""
	}

	return string(html)
}

func HtmlSearch(html string, regexStr string) []string {

	regex := regexp.MustCompile(regexStr)

	result := regex.FindAllStringSubmatch(html, -1)

	var versions []string
	for _, match := range result {

		versions = append(versions, (match[0])[:len(match[0])-1])

	}
	return versions
}
